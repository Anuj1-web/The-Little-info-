<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Little Info - Home</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo" class="logo">
    <h1>The Little Info</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="login.html">Login</a>
      <a href="signup.html">Signup</a>
    </nav>
  </header>

  <main>
    <!-- Central Hero Logo -->
    <img src="logo.png" alt="Hero Logo" class="hero-logo">

    <!-- Trending & Traditional Section -->
    <div class="container">
      <div class="box" id="trending-box">
        <h2>Trending Topics</h2>
        <div id="trending-content"></div>
      </div>

      <div class="box" id="traditional-box">
        <h2>Traditional Topics</h2>
        <div id="traditional-content"></div>
      </div>
    </div>
  </main>

  <footer>
    <p>Â© 2025 The Little Info. All rights reserved.</p>
  </footer>

  <!-- Load Firestore and fetch content -->
  <script type="module">
    import { db } from './firebaseInit.js';
    import {
      collection,
      query,
      orderBy,
      getDocs
    } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

    const trendingContainer = document.getElementById("trending-content");
    const traditionalContainer = document.getElementById("traditional-content");

    async function loadContent() {
      const contentQuery = query(collection(db, "content"), orderBy("timestamp", "desc"));
      const snapshot = await getDocs(contentQuery);

      snapshot.forEach((doc) => {
        const data = doc.data();
        const card = document.createElement("div");
        card.innerHTML = `
          <h3>${data.title}</h3>
          <p>${data.description}</p>
          ${data.type === 'video' ? `
            <video src="${data.url}" controls width="100%"></video>
          ` : `
            <img src="${data.url}" alt="${data.title}" style="max-width:100%; border-radius:8px;" />
          `}
          <hr>
        `;

        if (data.category === "trending") {
          trendingContainer.appendChild(card);
        } else if (data.category === "traditional") {
          traditionalContainer.appendChild(card);
        }
      });
    }

    loadContent();
  </script>
</body>
</html>
